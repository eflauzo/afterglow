<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="utf-8" />

  <script src="../../../node_modules/browser-es-module-loader/dist/babel-browser-build.js"></script>
  <script src="../../../node_modules/browser-es-module-loader/dist/browser-es-module-loader.js"></script>
  <!--
  <link href="https://fonts.googleapis.com/css?family=Audiowide" rel="stylesheet">
  -->
  <link href="https://fonts.googleapis.com/css?family=Jura" rel="stylesheet">


<style>
@font-face {
  font-family: "OCR-A";
  src: url(ocra.regular.ttf) format("truetype");
}
</style>

</head>
<body>
  <!--
  <div style="font-family: OCRA; display: none">.</div>
-->
  <div style="font-family: OCR-A"> Hello 123.1230</div>

  <canvas id="screen01" style="border: solid; height: 90vh; width: 90vw; display: block;"></canvas>

  <script type="module">
      // demonstration of visualization and selection using cathode structure

      import {CxDisplay,
        CxNode,
        CxNodePayloadViewport,
        CxNodePayloadPerspective,
        CxNodePayloadOrtho,
        CxNodePayloadTransform,
        CxNodePayloadInteractive,
        CxNodePayloadName,
        CxNodePayloadLabel,
        CxTextureFont,
        CxNameManager,
        CxScene
        } from "../../cathode.js"

      //
      //     root
      //       |
      //       - interactive
      //       \    |
      //        \---- Viewport
      //               |
      //               - perspective projection node
      //                   |
      //                   |
      //                    \- translate & texture
      //                             |
      //                             - Name
      //                                  |
      //                                - Label
      //
      //

      let scene = new CxScene()

      var display = new CxDisplay("screen01");

      let canva = document.getElementById("screen01");

      var interactive_payload = new CxNodePayloadInteractive(canva, scene);

      var interactive_node = new CxNode([interactive_payload])

      let viewport_payload = new CxNodePayloadViewport()
      viewport_payload.clear_color = [1.0, 1.0, 1.0, 1.0]
      var viewport_node = new CxNode([viewport_payload])

      var perspective_node = new CxNode([new CxNodePayloadOrtho()])

      var name_node = new CxNode([new CxNodePayloadName(4)])

      var transform = new CxNodePayloadTransform()
      transform.translate = [ 0.5, 0.5, 0.0]

      var transform_node = new CxNode([transform])

      var fontx = new CxTextureFont("OCR-A",20, "grey")

      var label = new CxNodePayloadLabel(fontx, "");
      label.text = "SPP: 341.057 (psi)"

      var visualizer_node = new CxNode([label])

      var root = new CxNode([]);

      root.items.push(interactive_node)
      root.items.push(viewport_node)
      interactive_node.items.push(viewport_node)
      viewport_node.items.push(perspective_node)
      perspective_node.items.push(transform_node)
      transform_node.items.push(name_node)
      name_node.items.push(visualizer_node)


    scene.root = root;
    display.start(scene)

  </script>

</body>
</html>
